const version = "1.0.0";
const cacheName = `proxi`;
self.addEventListener('install', e => {
  e.waitUntil(
    caches.open(cacheName).then(cache => {
      return cache.addAll([
        `/`,
        `/404.html`,
        `/index.html`,
        `/androidTutorial.svg`,
        `/background.png`,
        `/CNAME`,
        `/config.xml`,
        `/google65e33ee9aa8b283e.html`,
        `/icon.png`,
        `/iosTutorial.svg`,
        `/manifest.json`,
        `/package.json`,
        `/package-lock.json`,
        `/README.md`,
        `/script.js`,
        `/style.css`,
        `/site.webmanifest`,
        `/sw.js`,
        `/images/icons/apple-touch-icon.png`,
        `/images/icons/icon-72x72.png`,
        `/images/icons/icon-96x96.png`,
        `/images/icons/icon-128x128.png`,
        `/images/icons/icon-144x144.png`,
        `/images/icons/icon-152x152.png`,
        `/images/icons/icon-192x192.png`,
        `/images/icons/icon-384x384.png`,
        `/images/icons/icon-512x512.png`,
        `/res/android/midmap-hdpi/ic_launcher.png`,
        `/res/android/midmap-hdpi/ic_launcher_background.png`,
        `/res/android/midmap-hdpi/ic_launcher_foreground.png`,
        `/res/android/midmap-hdpi/ic_launcher_round.png`,
        `/res/android/midmap-mdpi/ic_launcher.png`,
        `/res/android/midmap-mdpi/ic_launcher_background.png`,
        `/res/android/midmap-mdpi/ic_launcher_foreground.png`,
        `/res/android/midmap-mdpi/ic_launcher_round.png`,
        `/res/android/midmap-xhdpi/ic_launcher.png`,
        `/res/android/midmap-xhdpi/ic_launcher_background.png`,
        `/res/android/midmap-xhdpi/ic_launcher_foreground.png`,
        `/res/android/midmap-xhdpi/ic_launcher_round.png`,
        `/res/android/midmap-xxhdpi/ic_launcher.png`,
        `/res/android/midmap-xxhdpi/ic_launcher_background.png`,
        `/res/android/midmap-xxhdpi/ic_launcher_foreground.png`,
        `/res/android/midmap-xxhdpi/ic_launcher_round.png`,
        `/res/android/midmap-xxxhdpi/ic_launcher.png`,
        `/res/android/midmap-xxxhdpi/ic_launcher_background.png`,
        `/res/android/midmap-xxxhdpi/ic_launcher_foreground.png`,
        `/res/android/midmap-xxxhdpi/ic_launcher_round.png`,
        `/res/values/colors.xml`,
        `/storefront/feature.png`,
        `/storefront/screenshot1.png`,
        `/storefront/screenshot2.png`,
        `/storefront/screenshot3.png`,
        `/storefront/screenshot4.png`,
        `/storefront/screenshot5.png`,
        `/storefront/screenshot6.png`,
        `/www/lang/en_AU.js`,
        `/www/lang/en_CA.js`,
        `/www/lang/en_GB.js`,
        `/www/lang/en_NZ.js`,
        `/www/lang/en_US.js`,
        `/www/lang/en_ZA.js`,
        `/www/lib/fonts/lato-latin.woff2`,
        `/www/lib/fonts/lato-latinExt.woff2`,
        `/www/lib/fonts/materialIcons.woff2`,
        `/www/lib/firebase-analytics.js`,
        `/www/lib/firebase-app.js`,
        `/www/lib/firebase-auth.js`,
        `/www/lib/firebase-database.js`,
        `/www/lib/firebase-storage.js`,
        `/www/lib/font.css`,
        `/www/lib/jquery.min.js`,
        `/www/lib/latlon-geohash.js`,
        `/www/lib/mapbox-gl.js`,
        `/www/lib/nosleep.min.js`,
        `/www/media/graphics/data.svg`,
        `/www/media/graphics/distancing.svg`,
        `/www/media/graphics/home.svg`,
        `/www/media/graphics/stats.svg`,
        `/www/media/graphics/user.svg`,
        `/www/media/levels/1.svg`,
        `/www/media/levels/2.svg`,
        `/www/media/levels/3.svg`,
        `/www/media/levels/4.svg`,
        `/www/media/levels/5.svg`,
        `/www/media/sounds/anhingaBird.mp3`,
        `/www/media/sounds/appear.mp3`,
        `/www/media/sounds/applause.mp3`,
        `/www/media/sounds/babySneeze.mp3`,
        `/www/media/sounds/baldEagle.mp3`,
        `/www/media/sounds/bearCubs.mp3`,
        `/www/media/sounds/bell.wav`,
        `/www/media/sounds/boing.wav`,
        `/www/media/sounds/cannonFire.mp3`,
        `/www/media/sounds/chicken.mp3`,
        `/www/media/sounds/churchBells.mp3`,
        `/www/media/sounds/coyoteCall.mp3`,
        `/www/media/sounds/dogLicking.mp3`,
        `/www/media/sounds/drum.wav`,
        `/www/media/sounds/fart.mp3`,
        `/www/media/sounds/gorilla.mp3`,
        `/www/media/sounds/morseCode.mp3`,
        `/www/media/sounds/musketFire.mp3`,
        `/www/media/sounds/oi.wav`,
        `/www/media/sounds/parrots.mp3`,
        `/www/media/sounds/promotion.mp3`,
        `/www/media/sounds/radar.wav`,
        `/www/media/sounds/rainforestFrogs.mp3`,
        `/www/media/sounds/raven.mp3`,
        `/www/media/sounds/robot.wav`,
        `/www/media/sounds/toiletFlush.mp3`,
        `/www/media/sounds/turkey.mp3`,
        `/www/media/sounds/ufo.mp3`,
        `/www/media/sounds/wolves.mp3`,
        `/www/media/emux.png`,
        `/www/media/emux.svg`,
        `/www/media/emuxText.png`,
        `/www/media/emuxText.svg`,
        `/www/media/profile.svg`,
        `/www/media/proxi.png`,
        `/www/media/proxi.svg`,
        `/www/media/proxiRaw.png`,
        `/www/alerts.js`,
        `/www/awards.js`,
        `/www/core.js`,
        `/www/index.html`,
        `/www/lang.js`,
        `/www/map.js`,
        `/www/screens.js`,
        `/www/script.js`,
        `/www/style.css`,
        `/www/tracking.js`,
        `/media/SFK.png`,
        `/media/Shadow.png`,
        `/media/square.png`,
        `/media/TilesArt.svg`,
        `/media/Twitch_logo.png`,
        `/media/WhiteLarge.png`,
        `/media/WhiteSmall.png`,
        `/media/YouTube_logo.png`,
        `/media/featureThumbnails/attribution.png`,
        `/media/Help Centre/Article 0001/No Preview Available - Google Drive.PNG`,
      ])
          .then(() => self.skipWaiting());
    })
  );
});

self.addEventListener('activate', event => {
  event.waitUntil(self.clients.claim());
});

self.addEventListener('fetch', event => {
  event.respondWith(
    caches.open(cacheName)
      .then(cache => cache.match(event.request, {ignoreSearch: true}))
      .then(response => {
      return response || fetch(event.request);
    })
  );
});